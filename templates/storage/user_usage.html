{% extends 'base.html' %}

{% block title %}User Usage Report - Cloud Storage Service{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h2>User Usage Report</h2>
        <p class="lead">View the storage usage details of users in the system.</p>

        {% if usage %}
            <h3>Usage Details for {{ user_id }}</h3>
            <table class="table">
                <thead>
                <tr>
                    <th>Total Size</th>
                    <th>File Count</th>
                    <th>Upload Count</th>
                    <th>Delete Count</th>
                    <th>Last Activity Date</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>{{ usage.total_size }} bytes</td>
                    <td>{{ usage.file_count }}</td>
                    <td>{{ usage.upload_count }}</td>
                    <td>{{ usage.delete_count }}</td>
                    <td>{{ usage.last_activity_date|date:"Y-m-d H:i:s" }}</td>
                </tr>
                </tbody>
            </table>
        {% elif all_users_usage %}
            <h3>All Users Usage</h3>
            <table class="table">
                <thead>
                <tr>
                    <th>User ID</th>
                    <th>Total Size</th>
                    <th>File Count</th>
                    <th>Upload Count</th>
                    <th>Delete Count</th>
                    <th>Last Activity Date</th>
                </tr>
                </thead>
                <tbody>
                {% for user_usage in all_users_usage %}
                    <tr>
                        <td>{{ user_usage.user_id }}</td>
                        <td>{{ user_usage.total_size }} bytes</td>
                        <td>{{ user_usage.file_count }}</td>
                        <td>{{ user_usage.upload_count }}</td>
                        <td>{{ user_usage.delete_count }}</td>
                        <td>{{ user_usage.last_activity_date|date:"Y-m-d H:i:s" }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No usage data available at the moment.</p>
        {% endif %}
    </div>
{% endblock %}
